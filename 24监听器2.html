<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<div id="app">
		    <span >用户名：</span>
		    <span >
		    	<input type="text" v-model.lazy="uname"/>
		    </span>
		    <span> {{tip}} </span>
		</div>
		<script type="text/javascript" src="js/vue.js"></script>
		<script type="text/javascript">
			/*
			 * 监听器
			 * 1.采用监听器监听用户名的变化
			 * 2.调用后台接口进行验证
			 * 3.根据验证的结果调整提示信息
			 * */
			var vue=new Vue({
				el:"#app",
				data:{
					uname:'',
					tip:''
				},
				methods:{
					checkName:function(uname){
						var that=this;
						setTimeout(function(){
							//模拟接口调用
							if(uname=="admin"){
								that.tip="用户名已经存在，请更换一个"
							}else {
								that.tip="用户名可以使用"
							}
						},2000)
					}
				},
				watch:{
					uname:function(val){
						//调用后台接口验证用户名的合法性
						this.checkName(val);
						this.tip="正在验证..."
					}
				}
			})
		</script>
	</body>
</html>
